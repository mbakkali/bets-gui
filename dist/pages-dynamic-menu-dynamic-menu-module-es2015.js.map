{"version":3,"sources":["./src/app/pages/dynamic-menu/dynamic-menu.component.html","./src/app/pages/dynamic-menu/dynamic-menu.component.ts","./src/app/pages/dynamic-menu/dynamic-menu.module.ts","./src/app/pages/dynamic-menu/dynamic-menu.service.ts"],"names":[],"mappings":"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","file":"pages-dynamic-menu-dynamic-menu-module-es2015.js","sourcesContent":["module.exports = \"<div fxLayout=\\\"row wrap\\\" fxLayoutAlign=\\\"center\\\">\\r\\n    <div fxFlex=\\\"100\\\" fxFlex.gt-sm=\\\"50\\\" fxFlex.sm=\\\"60\\\" class=\\\"flex-p\\\">\\r\\n        <mat-card class=\\\"list\\\">\\r\\n            <mat-card-content>\\r\\n                <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit(form.value)\\\">      \\r\\n                    <mat-form-field class=\\\"w-100\\\">\\r\\n                        <input matInput placeholder=\\\"Title\\\" formControlName=\\\"title\\\">\\r\\n                        <mat-error *ngIf=\\\"form.controls.title.errors?.required\\\">Menu title is required</mat-error>\\r\\n                        <mat-error *ngIf=\\\"form.controls.title.hasError('minlength')\\\">Menu title isn't long enough, minimum of 3 characters</mat-error>\\r\\n                    </mat-form-field> \\r\\n                    <mat-form-field class=\\\"w-100\\\">\\r\\n                        <mat-select placeholder=\\\"Icon\\\" formControlName=\\\"icon\\\">\\r\\n                            <mat-option *ngFor=\\\"let icon of icons\\\" [value]=\\\"icon\\\">\\r\\n                                <mat-icon>{{ icon }}</mat-icon>\\r\\n                            </mat-option>\\r\\n                        </mat-select>\\r\\n                    </mat-form-field>\\r\\n                    <mat-form-field class=\\\"w-100\\\" >\\r\\n                        <input matInput placeholder=\\\"RouterLink\\\" formControlName=\\\"routerLink\\\" matTooltip=\\\"e.g. /dashboard\\\" matTooltipPosition=\\\"after\\\">\\r\\n                        <mat-error *ngIf=\\\"form.controls.routerLink.errors?.required\\\">Routerlink or href is required</mat-error>\\r\\n                    </mat-form-field>\\r\\n                    <mat-checkbox formControlName=\\\"hasSubMenu\\\">Has sub menu</mat-checkbox>\\r\\n                    <mat-form-field class=\\\"w-100\\\" >\\r\\n                        <input matInput placeholder=\\\"Href\\\" formControlName=\\\"href\\\" matTooltip=\\\"e.g. http://themeseason.com\\\" matTooltipPosition=\\\"after\\\">\\r\\n                        <mat-error *ngIf=\\\"form.controls.href.errors?.required\\\">Href or routerlink is required</mat-error>\\r\\n                    </mat-form-field>\\r\\n                    <mat-radio-group formControlName=\\\"target\\\">\\r\\n                        <mat-radio-button value=\\\"_blank\\\">_blank</mat-radio-button>\\r\\n                        <mat-radio-button value=\\\"_self\\\" class=\\\"mx-1\\\">_self</mat-radio-button>\\r\\n                    </mat-radio-group>\\r\\n                    <mat-form-field class=\\\"w-100\\\">\\r\\n                        <mat-select placeholder=\\\"Parent menu\\\" formControlName=\\\"parentId\\\">\\r\\n                            <mat-option value=\\\"0\\\">-- Select Parent Menu --</mat-option>\\r\\n                            <mat-option *ngFor=\\\"let menuItem of menuItems\\\" [value]=\\\"menuItem.id\\\">\\r\\n                                {{menuItem.title}}\\r\\n                            </mat-option>\\r\\n                        </mat-select>\\r\\n                    </mat-form-field>\\r\\n                    <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"center\\\">\\r\\n                        <button mat-raised-button color=\\\"primary\\\" [disabled]=\\\"!form.valid\\\" type=\\\"submit\\\">Add New Menu Item</button>\\r\\n                    </div>\\r\\n                </form>\\r\\n            </mat-card-content>\\r\\n        </mat-card>\\r\\n      </div> \\r\\n</div> \"","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators} from '@angular/forms';\r\nimport { MatSnackBar } from '@angular/material';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { Menu } from '../../theme/components/menu/menu.model';\r\nimport { MenuService } from '../../theme/components/menu/menu.service';\r\nimport { DynamicMenuService } from './dynamic-menu.service';\r\nimport { AppSettings } from '../../app.settings';\r\nimport { Settings } from '../../app.settings.model';\r\nimport { VerticalMenuComponent } from '../../theme/components/menu/vertical-menu/vertical-menu.component';\r\nimport { listTransition } from '../../theme/utils/app-animation';\r\n\r\n@Component({\r\n  selector: 'app-dynamic-menu',\r\n  templateUrl: './dynamic-menu.component.html',\r\n  providers: [ DynamicMenuService, MenuService ],\r\n  animations: [ listTransition ],\r\n  host: {\r\n    '[@listTransition]': ''\r\n  }\r\n})\r\nexport class DynamicMenuComponent implements OnInit {\r\n  public settings: Settings;\r\n  public menuItems:Array<Menu>;\r\n  public icons = ['home','person', 'card_travel', 'delete', 'event', 'favorite', 'help' ]\r\n  public form:FormGroup;\r\n  constructor(public appSettings:AppSettings, \r\n              public formBuilder: FormBuilder, \r\n              public snackBar: MatSnackBar,\r\n              private menuService:MenuService,\r\n              private dynamicMenuService:DynamicMenuService) {\r\n    this.settings = this.appSettings.settings; \r\n    this.menuItems = this.menuService.getVerticalMenuItems();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = this.formBuilder.group({\r\n      'title': ['', Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'icon': null,\r\n      'routerLink': ['', Validators.required],    \r\n      'href': ['', Validators.required],            \r\n      'target': null,\r\n      'hasSubMenu': false,\r\n      'parentId': 0\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.form.valueChanges.pipe(debounceTime(500)).subscribe((menu:Menu) => {  \r\n      if(menu.routerLink && menu.routerLink != ''){\r\n        this.form.controls['href'].setValue(null);\r\n        this.form.controls['href'].disable();\r\n        this.form.controls['href'].clearValidators();\r\n        this.form.controls['target'].setValue(null);\r\n        this.form.controls['target'].disable();\r\n      }\r\n      else{\r\n        this.form.controls['href'].enable();\r\n        this.form.controls['href'].setValidators([Validators.required]);\r\n        this.form.controls['target'].enable();\r\n      }\r\n      this.form.controls['href'].updateValueAndValidity();\r\n\r\n      if(menu.href && menu.href != ''){\r\n        this.form.controls['routerLink'].setValue(null);\r\n        this.form.controls['routerLink'].disable();\r\n        this.form.controls['routerLink'].clearValidators();\r\n        this.form.controls['hasSubMenu'].setValue(false);\r\n        this.form.controls['hasSubMenu'].disable();\r\n      }\r\n      else{\r\n        this.form.controls['routerLink'].enable();\r\n        this.form.controls['routerLink'].setValidators([Validators.required]);\r\n        this.form.controls['hasSubMenu'].enable();\r\n      }\r\n      this.form.controls['routerLink'].updateValueAndValidity();\r\n    })\r\n  }\r\n\r\n  onSubmit(menu:Menu):void {\r\n    if (this.form.valid) {\r\n      this.dynamicMenuService.addNewMenuItem(VerticalMenuComponent, this.menuItems, menu);\r\n      this.snackBar.open('New menu item added successfully!', null, {\r\n        duration: 2000,\r\n      });\r\n      this.form.reset({\r\n        hasSubMenu:false,\r\n        parentId:0\r\n      });     \r\n    }\r\n  } \r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { DynamicMenuComponent } from './dynamic-menu.component';\r\n\r\nexport const routes = [\r\n  { path: '', component: DynamicMenuComponent, pathMatch: 'full' }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule, \r\n    ReactiveFormsModule,\r\n    RouterModule.forChild(routes),\r\n    SharedModule\r\n  ],\r\n  declarations: [\r\n    DynamicMenuComponent\r\n  ]\r\n})\r\nexport class DynamicMenuModule { }","import { Injectable, Injector, ComponentFactoryResolver, ApplicationRef, EmbeddedViewRef } from '@angular/core';\r\nimport { VerticalMenuComponent } from '../../theme/components/menu/vertical-menu/vertical-menu.component';\r\nimport { Menu } from '../../theme/components/menu/menu.model';\r\n\r\n@Injectable()\r\nexport class DynamicMenuService {\r\n\r\n    constructor(private componentFactoryResolver: ComponentFactoryResolver,\r\n                private applicationRef: ApplicationRef,\r\n                private injector: Injector) { }     \r\n    \r\n    addNewMenuItem(component: any, menuItems:Array<Menu>, menuItem) {\r\n\r\n        const lastId = menuItems[menuItems.length-1].id;\r\n        const newMenuItem = new Menu(lastId+1, menuItem['title'], menuItem['routerLink'], menuItem['href'], menuItem['icon'], menuItem['target'], menuItem['hasSubMenu'], parseInt(menuItem['parentId']));\r\n                \r\n        menuItems.push(newMenuItem);\r\n        let item = menuItems.filter(item=>item.id == newMenuItem.parentId)[0];\r\n        if(item) item.hasSubMenu = true;  \r\n\r\n        const componentRef = this.componentFactoryResolver\r\n            .resolveComponentFactory(component)\r\n            .create(this.injector);        \r\n        \r\n        this.applicationRef.attachView(componentRef.hostView);\r\n        \r\n        let instance = <VerticalMenuComponent>componentRef.instance;\r\n        instance.menuItems = menuItems;\r\n        instance.menuParentId = 0;\r\n\r\n        const elem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\r\n                \r\n        const verticalMenu = document.getElementById('vertical-menu');        \r\n        verticalMenu.replaceChild(elem, verticalMenu.children[0]);  \r\n        \r\n    } \r\n}"],"sourceRoot":"webpack:///"}